{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\nandu\\\\My Projects\\\\Sarathi\\\\frontend\\\\src\\\\components\\\\LocationSelector.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef } from \"react\";\nimport \"./LocationSelector.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst LocationSelector = ({\n  type,\n  setLocation,\n  otherLocation,\n  calculateDistanceAndFare\n}) => {\n  _s();\n  const [searchValue, setSearchValue] = useState(\"\");\n  const [predictions, setPredictions] = useState([]);\n  const [isFocused, setIsFocused] = useState(false);\n  const timeoutRef = useRef(null);\n  const handleSearchChange = e => {\n    const value = e.target.value;\n    setSearchValue(value);\n    clearTimeout(timeoutRef.current);\n    if (!value.trim()) return setPredictions([]);\n    timeoutRef.current = setTimeout(() => {\n      fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(value)}&addressdetails=1&limit=5`, {\n        headers: {\n          \"User-Agent\": \"SarathiApp/1.0 (support@sarathiapp.com)\",\n          \"Referrer-Policy\": \"no-referrer\"\n        }\n      }).then(res => res.json()).then(data => setPredictions(data)).catch(() => setPredictions([]));\n    }, 400);\n  };\n  const handleSelectPrediction = place => {\n    const location = {\n      lat: parseFloat(place.lat),\n      lng: parseFloat(place.lon),\n      address: place.display_name\n    };\n    setSearchValue(place.display_name);\n    setPredictions([]);\n    setIsFocused(false);\n    setLocation(location);\n    if (otherLocation !== null && otherLocation !== void 0 && otherLocation.lat && otherLocation !== null && otherLocation !== void 0 && otherLocation.lng) {\n      calculateDistanceAndFare(type === \"pickup\" ? location : otherLocation, type === \"drop\" ? location : otherLocation);\n    }\n  };\n  const handleUseCurrentLocation = () => {\n    if (!navigator.geolocation) {\n      alert(\"Geolocation is not supported by your browser.\");\n      return;\n    }\n    navigator.geolocation.getCurrentPosition(pos => {\n      const {\n        latitude,\n        longitude\n      } = pos.coords;\n      fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${latitude}&lon=${longitude}`).then(res => res.json()).then(data => {\n        const address = data.display_name || \"Current Location\";\n        const location = {\n          lat: latitude,\n          lng: longitude,\n          address\n        };\n        setSearchValue(address);\n        setLocation(location);\n        if (otherLocation !== null && otherLocation !== void 0 && otherLocation.lat && otherLocation !== null && otherLocation !== void 0 && otherLocation.lng) {\n          calculateDistanceAndFare(type === \"pickup\" ? location : otherLocation, type === \"drop\" ? location : otherLocation);\n        }\n      }).catch(() => alert(\"Unable to fetch address details.\"));\n    }, () => alert(\"Failed to get current location. Please enable GPS.\"));\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"pickup-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form-row pickup-field\",\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"location-icon\",\n        children: type === \"pickup\" ? \"📍\" : \"🏁\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \" \",\n        value: searchValue,\n        onChange: handleSearchChange,\n        onFocus: () => setIsFocused(true),\n        onBlur: () => setTimeout(() => setIsFocused(false), 200),\n        className: \"input\",\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: type === \"pickup\" ? \"Pickup Location\" : \"Drop Location\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 7\n    }, this), isFocused && /*#__PURE__*/_jsxDEV(\"ul\", {\n      className: \"predictions-list\",\n      children: [type === \"pickup\" && /*#__PURE__*/_jsxDEV(\"li\", {\n        className: \"use-location-option\",\n        onMouseDown: e => {\n          e.preventDefault();\n          handleUseCurrentLocation();\n        },\n        children: \"\\uD83D\\uDCCD Use Current Location\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 13\n      }, this), predictions.length > 0 ? predictions.map(p => /*#__PURE__*/_jsxDEV(\"li\", {\n        onMouseDown: () => handleSelectPrediction(p),\n        children: p.display_name\n      }, p.place_id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 15\n      }, this)) : searchValue && /*#__PURE__*/_jsxDEV(\"li\", {\n        className: \"no-results\",\n        children: \"No matching locations found\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 28\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 76,\n    columnNumber: 5\n  }, this);\n};\n_s(LocationSelector, \"25O8BU0wudmLnm7vXKZhxs9LYfA=\");\n_c = LocationSelector;\nexport default LocationSelector;\nvar _c;\n$RefreshReg$(_c, \"LocationSelector\");","map":{"version":3,"names":["React","useState","useRef","jsxDEV","_jsxDEV","LocationSelector","type","setLocation","otherLocation","calculateDistanceAndFare","_s","searchValue","setSearchValue","predictions","setPredictions","isFocused","setIsFocused","timeoutRef","handleSearchChange","e","value","target","clearTimeout","current","trim","setTimeout","fetch","encodeURIComponent","headers","then","res","json","data","catch","handleSelectPrediction","place","location","lat","parseFloat","lng","lon","address","display_name","handleUseCurrentLocation","navigator","geolocation","alert","getCurrentPosition","pos","latitude","longitude","coords","className","children","fileName","_jsxFileName","lineNumber","columnNumber","placeholder","onChange","onFocus","onBlur","required","onMouseDown","preventDefault","length","map","p","place_id","_c","$RefreshReg$"],"sources":["C:/Users/nandu/My Projects/Sarathi/frontend/src/components/LocationSelector.jsx"],"sourcesContent":["import React, { useState, useRef } from \"react\";\r\nimport \"./LocationSelector.css\";\r\n\r\nconst LocationSelector = ({ type, setLocation, otherLocation, calculateDistanceAndFare }) => {\r\n  const [searchValue, setSearchValue] = useState(\"\");\r\n  const [predictions, setPredictions] = useState([]);\r\n  const [isFocused, setIsFocused] = useState(false);\r\n  const timeoutRef = useRef(null);\r\n\r\n  const handleSearchChange = (e) => {\r\n    const value = e.target.value;\r\n    setSearchValue(value);\r\n\r\n    clearTimeout(timeoutRef.current);\r\n    if (!value.trim()) return setPredictions([]);\r\n\r\n    timeoutRef.current = setTimeout(() => {\r\n      fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(value)}&addressdetails=1&limit=5`, {\r\n        headers: {\r\n          \"User-Agent\": \"SarathiApp/1.0 (support@sarathiapp.com)\",\r\n          \"Referrer-Policy\": \"no-referrer\",\r\n        },\r\n      })\r\n        .then((res) => res.json())\r\n        .then((data) => setPredictions(data))\r\n        .catch(() => setPredictions([]));\r\n    }, 400);\r\n  };\r\n\r\n  const handleSelectPrediction = (place) => {\r\n    const location = { lat: parseFloat(place.lat), lng: parseFloat(place.lon), address: place.display_name };\r\n    setSearchValue(place.display_name);\r\n    setPredictions([]);\r\n    setIsFocused(false);\r\n    setLocation(location);\r\n\r\n    if (otherLocation?.lat && otherLocation?.lng) {\r\n      calculateDistanceAndFare(\r\n        type === \"pickup\" ? location : otherLocation,\r\n        type === \"drop\" ? location : otherLocation\r\n      );\r\n    }\r\n  };\r\n\r\n  const handleUseCurrentLocation = () => {\r\n    if (!navigator.geolocation) {\r\n      alert(\"Geolocation is not supported by your browser.\");\r\n      return;\r\n    }\r\n\r\n    navigator.geolocation.getCurrentPosition(\r\n      (pos) => {\r\n        const { latitude, longitude } = pos.coords;\r\n        fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${latitude}&lon=${longitude}`)\r\n          .then((res) => res.json())\r\n          .then((data) => {\r\n            const address = data.display_name || \"Current Location\";\r\n            const location = { lat: latitude, lng: longitude, address };\r\n            setSearchValue(address);\r\n            setLocation(location);\r\n\r\n            if (otherLocation?.lat && otherLocation?.lng) {\r\n              calculateDistanceAndFare(\r\n                type === \"pickup\" ? location : otherLocation,\r\n                type === \"drop\" ? location : otherLocation\r\n              );\r\n            }\r\n          })\r\n          .catch(() => alert(\"Unable to fetch address details.\"));\r\n      },\r\n      () => alert(\"Failed to get current location. Please enable GPS.\")\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div className=\"pickup-container\">\r\n      <div className=\"form-row pickup-field\">\r\n        <span className=\"location-icon\">{type === \"pickup\" ? \"📍\" : \"🏁\"}</span>\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\" \"\r\n          value={searchValue}\r\n          onChange={handleSearchChange}\r\n          onFocus={() => setIsFocused(true)}\r\n          onBlur={() => setTimeout(() => setIsFocused(false), 200)}\r\n          className=\"input\"\r\n          required\r\n        />\r\n        <label>{type === \"pickup\" ? \"Pickup Location\" : \"Drop Location\"}</label>\r\n      </div>\r\n\r\n      {isFocused && (\r\n        <ul className=\"predictions-list\">\r\n          {type === \"pickup\" && (\r\n            <li\r\n              className=\"use-location-option\"\r\n              onMouseDown={(e) => {\r\n                e.preventDefault();\r\n                handleUseCurrentLocation();\r\n              }}\r\n            >\r\n              📍 Use Current Location\r\n            </li>\r\n          )}\r\n          {predictions.length > 0 ? (\r\n            predictions.map((p) => (\r\n              <li key={p.place_id} onMouseDown={() => handleSelectPrediction(p)}>\r\n                {p.display_name}\r\n              </li>\r\n            ))\r\n          ) : (\r\n            searchValue && <li className=\"no-results\">No matching locations found</li>\r\n          )}\r\n        </ul>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LocationSelector;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}