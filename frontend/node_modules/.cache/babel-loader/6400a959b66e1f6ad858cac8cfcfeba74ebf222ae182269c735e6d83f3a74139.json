{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\nandu\\\\My Projects\\\\Sarathi\\\\frontend\\\\src\\\\components\\\\LocationSelector.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport \"./LocationSelector.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ratePerKm = 25; // ðŸ’° Change this to your rate\n\nconst getCoordinates = async address => {\n  try {\n    const res = await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(address)}&limit=1`);\n    const data = await res.json();\n    if (data.length > 0) {\n      return {\n        lat: parseFloat(data[0].lat),\n        lng: parseFloat(data[0].lon)\n      };\n    }\n    return null;\n  } catch {\n    return null;\n  }\n};\n\n// Haversine formula for distance in km\nconst calculateDistance = (coord1, coord2) => {\n  if (!coord1 || !coord2) return 0;\n  const R = 6371;\n  const dLat = (coord2.lat - coord1.lat) * Math.PI / 180;\n  const dLon = (coord2.lng - coord1.lng) * Math.PI / 180;\n  const lat1 = coord1.lat * Math.PI / 180;\n  const lat2 = coord2.lat * Math.PI / 180;\n  const a = Math.sin(dLat / 2) * Math.sin(dLat / 2) + Math.sin(dLon / 2) * Math.sin(dLon / 2) * Math.cos(lat1) * Math.cos(lat2);\n  const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n  return R * c;\n};\nconst LocationSelector = ({\n  setPickup,\n  setDrop\n}) => {\n  _s();\n  const [pickup, setPickupLocal] = useState(\"\");\n  const [drop, setDropLocal] = useState(\"\");\n  const [distance, setDistance] = useState(0);\n  const [fare, setFare] = useState(0);\n  const [pickupCoords, setPickupCoords] = useState(null);\n  const [dropCoords, setDropCoords] = useState(null);\n\n  // When pickup or drop changes, update coordinates\n  useEffect(() => {\n    const updateCoords = async () => {\n      if (pickup) {\n        const coords = await getCoordinates(pickup);\n        setPickupCoords(coords);\n        if (coords) setPickup({\n          ...coords,\n          address: pickup\n        });\n      }\n      if (drop) {\n        const coords = await getCoordinates(drop);\n        setDropCoords(coords);\n        if (coords) setDrop({\n          ...coords,\n          address: drop\n        });\n      }\n    };\n    updateCoords();\n  }, [pickup, drop, setPickup, setDrop]);\n\n  // Calculate distance & fare when coordinates change\n  useEffect(() => {\n    if (pickupCoords && dropCoords) {\n      const dist = calculateDistance(pickupCoords, dropCoords);\n      setDistance(dist.toFixed(2));\n      setFare(Math.round(dist * ratePerKm));\n    }\n  }, [pickupCoords, dropCoords]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"pickup-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form-row\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Pickup Location\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"Enter pickup location\",\n        value: pickup,\n        onChange: e => setPickupLocal(e.target.value),\n        className: \"search-input\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form-row\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Drop Location\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"Enter drop location\",\n        value: drop,\n        onChange: e => setDropLocal(e.target.value),\n        className: \"search-input\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 7\n    }, this), distance > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"fare-display\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Distance:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 13\n        }, this), \" \", distance, \" km\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Estimated Fare:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 13\n        }, this), \" \\u20B9\", fare]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 77,\n    columnNumber: 5\n  }, this);\n};\n_s(LocationSelector, \"jIW7Xkd5U5UdmU+x4kJMHZMQkeU=\");\n_c = LocationSelector;\nexport default PickupDropLocation;\nvar _c;\n$RefreshReg$(_c, \"LocationSelector\");","map":{"version":3,"names":["React","useState","useEffect","jsxDEV","_jsxDEV","ratePerKm","getCoordinates","address","res","fetch","encodeURIComponent","data","json","length","lat","parseFloat","lng","lon","calculateDistance","coord1","coord2","R","dLat","Math","PI","dLon","lat1","lat2","a","sin","cos","c","atan2","sqrt","LocationSelector","setPickup","setDrop","_s","pickup","setPickupLocal","drop","setDropLocal","distance","setDistance","fare","setFare","pickupCoords","setPickupCoords","dropCoords","setDropCoords","updateCoords","coords","dist","toFixed","round","className","children","fileName","_jsxFileName","lineNumber","columnNumber","type","placeholder","value","onChange","e","target","_c","PickupDropLocation","$RefreshReg$"],"sources":["C:/Users/nandu/My Projects/Sarathi/frontend/src/components/LocationSelector.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport \"./LocationSelector.css\";\r\n\r\nconst ratePerKm = 25; // ðŸ’° Change this to your rate\r\n\r\nconst getCoordinates = async (address) => {\r\n  try {\r\n    const res = await fetch(\r\n      `https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(\r\n        address\r\n      )}&limit=1`\r\n    );\r\n    const data = await res.json();\r\n    if (data.length > 0) {\r\n      return {\r\n        lat: parseFloat(data[0].lat),\r\n        lng: parseFloat(data[0].lon),\r\n      };\r\n    }\r\n    return null;\r\n  } catch {\r\n    return null;\r\n  }\r\n};\r\n\r\n// Haversine formula for distance in km\r\nconst calculateDistance = (coord1, coord2) => {\r\n  if (!coord1 || !coord2) return 0;\r\n  const R = 6371;\r\n  const dLat = ((coord2.lat - coord1.lat) * Math.PI) / 180;\r\n  const dLon = ((coord2.lng - coord1.lng) * Math.PI) / 180;\r\n  const lat1 = (coord1.lat * Math.PI) / 180;\r\n  const lat2 = (coord2.lat * Math.PI) / 180;\r\n\r\n  const a =\r\n    Math.sin(dLat / 2) * Math.sin(dLat / 2) +\r\n    Math.sin(dLon / 2) * Math.sin(dLon / 2) * Math.cos(lat1) * Math.cos(lat2);\r\n  const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\r\n  return R * c;\r\n};\r\n\r\nconst LocationSelector = ({ setPickup, setDrop }) => {\r\n  const [pickup, setPickupLocal] = useState(\"\");\r\n  const [drop, setDropLocal] = useState(\"\");\r\n  const [distance, setDistance] = useState(0);\r\n  const [fare, setFare] = useState(0);\r\n  const [pickupCoords, setPickupCoords] = useState(null);\r\n  const [dropCoords, setDropCoords] = useState(null);\r\n\r\n  // When pickup or drop changes, update coordinates\r\n  useEffect(() => {\r\n    const updateCoords = async () => {\r\n      if (pickup) {\r\n        const coords = await getCoordinates(pickup);\r\n        setPickupCoords(coords);\r\n        if (coords) setPickup({ ...coords, address: pickup });\r\n      }\r\n      if (drop) {\r\n        const coords = await getCoordinates(drop);\r\n        setDropCoords(coords);\r\n        if (coords) setDrop({ ...coords, address: drop });\r\n      }\r\n    };\r\n    updateCoords();\r\n  }, [pickup, drop, setPickup, setDrop]);\r\n\r\n  // Calculate distance & fare when coordinates change\r\n  useEffect(() => {\r\n    if (pickupCoords && dropCoords) {\r\n      const dist = calculateDistance(pickupCoords, dropCoords);\r\n      setDistance(dist.toFixed(2));\r\n      setFare(Math.round(dist * ratePerKm));\r\n    }\r\n  }, [pickupCoords, dropCoords]);\r\n\r\n  return (\r\n    <div className=\"pickup-container\">\r\n      <div className=\"form-row\">\r\n        <label>Pickup Location</label>\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"Enter pickup location\"\r\n          value={pickup}\r\n          onChange={(e) => setPickupLocal(e.target.value)}\r\n          className=\"search-input\"\r\n        />\r\n      </div>\r\n\r\n      <div className=\"form-row\">\r\n        <label>Drop Location</label>\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"Enter drop location\"\r\n          value={drop}\r\n          onChange={(e) => setDropLocal(e.target.value)}\r\n          className=\"search-input\"\r\n        />\r\n      </div>\r\n\r\n      {distance > 0 && (\r\n        <div className=\"fare-display\">\r\n          <p>\r\n            <strong>Distance:</strong> {distance} km\r\n          </p>\r\n          <p>\r\n            <strong>Estimated Fare:</strong> â‚¹{fare}\r\n          </p>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PickupDropLocation;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}