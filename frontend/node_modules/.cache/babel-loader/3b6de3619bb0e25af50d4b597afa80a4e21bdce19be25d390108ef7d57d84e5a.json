{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\nandu\\\\My Projects\\\\Sarathi\\\\frontend\\\\src\\\\components\\\\LocationSelector.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState } from \"react\";\nimport \"./LocationSelector.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst LocationSelector = ({\n  type,\n  setLocation\n}) => {\n  _s();\n  const [searchValue, setSearchValue] = useState(\"\");\n  const [predictions, setPredictions] = useState([]);\n  const [isFocused, setIsFocused] = useState(false);\n\n  // üîπ Handle input change and fetch suggestions\n  const handleSearchChange = e => {\n    const value = e.target.value;\n    setSearchValue(value);\n    if (!value.trim()) return setPredictions([]);\n    fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(value)}&addressdetails=1&limit=5`, {\n      headers: {\n        \"User-Agent\": \"SarathiApp/1.0 (support@sarathiapp.com)\",\n        \"Referrer-Policy\": \"no-referrer\"\n      }\n    }).then(res => res.json()).then(data => setPredictions(data)).catch(() => setPredictions([]));\n  };\n\n  // üîπ Select from dropdown\n  const handleSelectPrediction = place => {\n    const location = {\n      lat: parseFloat(place.lat),\n      lng: parseFloat(place.lon),\n      address: place.display_name\n    };\n    setSearchValue(place.display_name);\n    setPredictions([]);\n    setIsFocused(false);\n    setLocation(location);\n  };\n\n  // üîπ Use current location\n  const handleUseCurrentLocation = () => {\n    if (!navigator.geolocation) {\n      alert(\"Geolocation is not supported by your browser.\");\n      return;\n    }\n    navigator.geolocation.getCurrentPosition(pos => {\n      const {\n        latitude,\n        longitude\n      } = pos.coords;\n      fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${latitude}&lon=${longitude}`).then(res => res.json()).then(data => {\n        const address = data.display_name || \"Current Location\";\n        const location = {\n          lat: latitude,\n          lng: longitude,\n          address\n        };\n        setSearchValue(address);\n        setLocation(location);\n      }).catch(() => alert(\"Unable to fetch address details.\"));\n    }, () => alert(\"Failed to get current location. Please enable GPS.\"));\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"pickup-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form-row pickup-field\",\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"location-icon\",\n        children: type === \"pickup\" ? \"üìç\" : \"üèÅ\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \" \",\n        value: searchValue,\n        onChange: handleSearchChange,\n        onFocus: () => setIsFocused(true),\n        onBlur: () => setTimeout(() => setIsFocused(false), 200),\n        className: \"input\",\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: type === \"pickup\" ? \"Pickup Location\" : \"Drop Location\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }, this), isFocused && /*#__PURE__*/_jsxDEV(\"ul\", {\n      className: \"predictions-list\",\n      children: [type === \"pickup\" && /*#__PURE__*/_jsxDEV(\"li\", {\n        className: \"use-location-option\",\n        onMouseDown: e => {\n          e.preventDefault();\n          handleUseCurrentLocation();\n        },\n        children: \"\\uD83D\\uDCCD Use Current Location\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 13\n      }, this), predictions.length > 0 ? predictions.map(p => /*#__PURE__*/_jsxDEV(\"li\", {\n        onMouseDown: () => handleSelectPrediction(p),\n        children: p.display_name\n      }, p.place_id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 15\n      }, this)) : searchValue && /*#__PURE__*/_jsxDEV(\"li\", {\n        className: \"no-results\",\n        children: \"No matching locations found\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 28\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 71,\n    columnNumber: 5\n  }, this);\n};\n_s(LocationSelector, \"ERSAKbgsqT9avGcizl//khQvDSw=\");\n_c = LocationSelector;\nexport default LocationSelector;\nvar _c;\n$RefreshReg$(_c, \"LocationSelector\");","map":{"version":3,"names":["React","useState","jsxDEV","_jsxDEV","LocationSelector","type","setLocation","_s","searchValue","setSearchValue","predictions","setPredictions","isFocused","setIsFocused","handleSearchChange","e","value","target","trim","fetch","encodeURIComponent","headers","then","res","json","data","catch","handleSelectPrediction","place","location","lat","parseFloat","lng","lon","address","display_name","handleUseCurrentLocation","navigator","geolocation","alert","getCurrentPosition","pos","latitude","longitude","coords","className","children","fileName","_jsxFileName","lineNumber","columnNumber","placeholder","onChange","onFocus","onBlur","setTimeout","required","onMouseDown","preventDefault","length","map","p","place_id","_c","$RefreshReg$"],"sources":["C:/Users/nandu/My Projects/Sarathi/frontend/src/components/LocationSelector.jsx"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport \"./LocationSelector.css\";\r\n\r\nconst LocationSelector = ({ type, setLocation }) => {\r\n  const [searchValue, setSearchValue] = useState(\"\");\r\n  const [predictions, setPredictions] = useState([]);\r\n  const [isFocused, setIsFocused] = useState(false);\r\n\r\n  // üîπ Handle input change and fetch suggestions\r\n  const handleSearchChange = (e) => {\r\n    const value = e.target.value;\r\n    setSearchValue(value);\r\n    if (!value.trim()) return setPredictions([]);\r\n\r\n    fetch(\r\n      `https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(\r\n        value\r\n      )}&addressdetails=1&limit=5`,\r\n      {\r\n        headers: {\r\n          \"User-Agent\": \"SarathiApp/1.0 (support@sarathiapp.com)\",\r\n          \"Referrer-Policy\": \"no-referrer\",\r\n        },\r\n      }\r\n    )\r\n      .then((res) => res.json())\r\n      .then((data) => setPredictions(data))\r\n      .catch(() => setPredictions([]));\r\n  };\r\n\r\n  // üîπ Select from dropdown\r\n  const handleSelectPrediction = (place) => {\r\n    const location = {\r\n      lat: parseFloat(place.lat),\r\n      lng: parseFloat(place.lon),\r\n      address: place.display_name,\r\n    };\r\n    setSearchValue(place.display_name);\r\n    setPredictions([]);\r\n    setIsFocused(false);\r\n    setLocation(location);\r\n  };\r\n\r\n  // üîπ Use current location\r\n  const handleUseCurrentLocation = () => {\r\n    if (!navigator.geolocation) {\r\n      alert(\"Geolocation is not supported by your browser.\");\r\n      return;\r\n    }\r\n\r\n    navigator.geolocation.getCurrentPosition(\r\n      (pos) => {\r\n        const { latitude, longitude } = pos.coords;\r\n        fetch(\r\n          `https://nominatim.openstreetmap.org/reverse?format=json&lat=${latitude}&lon=${longitude}`\r\n        )\r\n          .then((res) => res.json())\r\n          .then((data) => {\r\n            const address = data.display_name || \"Current Location\";\r\n            const location = { lat: latitude, lng: longitude, address };\r\n            setSearchValue(address);\r\n            setLocation(location);\r\n          })\r\n          .catch(() => alert(\"Unable to fetch address details.\"));\r\n      },\r\n      () => alert(\"Failed to get current location. Please enable GPS.\")\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div className=\"pickup-container\">\r\n      <div className=\"form-row pickup-field\">\r\n        <span className=\"location-icon\">{type === \"pickup\" ? \"üìç\" : \"üèÅ\"}</span>\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\" \"\r\n          value={searchValue}\r\n          onChange={handleSearchChange}\r\n          onFocus={() => setIsFocused(true)}\r\n          onBlur={() => setTimeout(() => setIsFocused(false), 200)}\r\n          className=\"input\"\r\n          required\r\n        />\r\n        <label>{type === \"pickup\" ? \"Pickup Location\" : \"Drop Location\"}</label>\r\n      </div>\r\n\r\n      {isFocused && (\r\n        <ul className=\"predictions-list\">\r\n          {type === \"pickup\" && (\r\n            <li\r\n              className=\"use-location-option\"\r\n              onMouseDown={(e) => {\r\n                e.preventDefault();\r\n                handleUseCurrentLocation();\r\n              }}\r\n            >\r\n              üìç Use Current Location\r\n            </li>\r\n          )}\r\n          {predictions.length > 0 ? (\r\n            predictions.map((p) => (\r\n              <li key={p.place_id} onMouseDown={() => handleSelectPrediction(p)}>\r\n                {p.display_name}\r\n              </li>\r\n            ))\r\n          ) : (\r\n            searchValue && <li className=\"no-results\">No matching locations found</li>\r\n          )}\r\n        </ul>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LocationSelector;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}