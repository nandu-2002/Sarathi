{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\nandu\\\\My Projects\\\\Sarathi\\\\frontend\\\\src\\\\components\\\\PickupLocation.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport \"./PickupLocation.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst PickupLocation = ({\n  setPickup\n}) => {\n  _s();\n  const [searchValue, setSearchValue] = useState(\"\");\n  const [predictions, setPredictions] = useState([]);\n  const [isFocused, setIsFocused] = useState(false);\n\n  // üîπ Autocomplete search (OpenStreetMap API)\n  const handleSearchChange = e => {\n    const value = e.target.value;\n    setSearchValue(value);\n    if (!value.trim()) return setPredictions([]);\n    fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(value)}&addressdetails=1&limit=5`, {\n      headers: {\n        \"User-Agent\": \"SarathiApp/1.0 (your_email@example.com)\",\n        \"Referrer-Policy\": \"no-referrer\"\n      }\n    }).then(res => res.json()).then(data => setPredictions(data)).catch(() => setPredictions([]));\n  };\n\n  // üîπ Select a prediction\n  const handleSelectPrediction = place => {\n    setPickup({\n      lat: parseFloat(place.lat),\n      lng: parseFloat(place.lon),\n      address: place.display_name\n    });\n    setSearchValue(place.display_name);\n    setPredictions([]);\n    setIsFocused(false);\n  };\n\n  // üîπ Use current location\n  const handleUseCurrentLocation = () => {\n    if (!navigator.geolocation) {\n      alert(\"Geolocation is not supported by your browser.\");\n      return;\n    }\n    navigator.geolocation.getCurrentPosition(pos => {\n      const {\n        latitude,\n        longitude\n      } = pos.coords;\n      fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${latitude}&lon=${longitude}`).then(res => res.json()).then(data => {\n        const address = data.display_name || \"Current Location\";\n        setPickup({\n          lat: latitude,\n          lng: longitude,\n          address\n        });\n        setSearchValue(address);\n      }).catch(() => alert(\"Unable to fetch address details.\"));\n    }, () => alert(\"Failed to get current location. Please enable GPS.\"));\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"pickup-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form-row pickup-field\",\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"location-icon\",\n        children: \"\\uD83D\\uDCCD\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        id: \"pickup\",\n        name: \"pickup\",\n        placeholder: \" \",\n        value: searchValue,\n        onChange: handleSearchChange,\n        onFocus: () => setIsFocused(true),\n        onBlur: () => setTimeout(() => setIsFocused(false), 200),\n        className: \"input\",\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"pickup\",\n        children: \"Pickup Location\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }, this), isFocused && /*#__PURE__*/_jsxDEV(\"ul\", {\n      className: \"predictions-list\",\n      children: [/*#__PURE__*/_jsxDEV(\"li\", {\n        className: \"use-location-option\",\n        onMouseDown: e => {\n          e.preventDefault();\n          handleUseCurrentLocation();\n        },\n        children: \"\\uD83D\\uDCCD Use Current Location\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 11\n      }, this), predictions.length > 0 ? predictions.map(p => /*#__PURE__*/_jsxDEV(\"li\", {\n        onMouseDown: () => handleSelectPrediction(p),\n        children: p.display_name\n      }, p.place_id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 15\n      }, this)) : searchValue && /*#__PURE__*/_jsxDEV(\"li\", {\n        className: \"no-results\",\n        children: \"No matching locations found\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 28\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 69,\n    columnNumber: 5\n  }, this);\n};\n_s(PickupLocation, \"ERSAKbgsqT9avGcizl//khQvDSw=\");\n_c = PickupLocation;\nexport default PickupLocation;\nvar _c;\n$RefreshReg$(_c, \"PickupLocation\");","map":{"version":3,"names":["React","useState","useEffect","jsxDEV","_jsxDEV","PickupLocation","setPickup","_s","searchValue","setSearchValue","predictions","setPredictions","isFocused","setIsFocused","handleSearchChange","e","value","target","trim","fetch","encodeURIComponent","headers","then","res","json","data","catch","handleSelectPrediction","place","lat","parseFloat","lng","lon","address","display_name","handleUseCurrentLocation","navigator","geolocation","alert","getCurrentPosition","pos","latitude","longitude","coords","className","children","fileName","_jsxFileName","lineNumber","columnNumber","type","id","name","placeholder","onChange","onFocus","onBlur","setTimeout","required","htmlFor","onMouseDown","preventDefault","length","map","p","place_id","_c","$RefreshReg$"],"sources":["C:/Users/nandu/My Projects/Sarathi/frontend/src/components/PickupLocation.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport \"./PickupLocation.css\";\r\n\r\nconst PickupLocation = ({ setPickup }) => {\r\n  const [searchValue, setSearchValue] = useState(\"\");\r\n  const [predictions, setPredictions] = useState([]);\r\n  const [isFocused, setIsFocused] = useState(false);\r\n\r\n  // üîπ Autocomplete search (OpenStreetMap API)\r\n  const handleSearchChange = (e) => {\r\n    const value = e.target.value;\r\n    setSearchValue(value);\r\n    if (!value.trim()) return setPredictions([]);\r\n\r\n    fetch(\r\n      `https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(\r\n        value\r\n      )}&addressdetails=1&limit=5`,\r\n      {\r\n        headers: {\r\n          \"User-Agent\": \"SarathiApp/1.0 (your_email@example.com)\",\r\n          \"Referrer-Policy\": \"no-referrer\",\r\n        },\r\n      }\r\n    )\r\n      .then((res) => res.json())\r\n      .then((data) => setPredictions(data))\r\n      .catch(() => setPredictions([]));\r\n  };\r\n\r\n  // üîπ Select a prediction\r\n  const handleSelectPrediction = (place) => {\r\n    setPickup({\r\n      lat: parseFloat(place.lat),\r\n      lng: parseFloat(place.lon),\r\n      address: place.display_name,\r\n    });\r\n    setSearchValue(place.display_name);\r\n    setPredictions([]);\r\n    setIsFocused(false);\r\n  };\r\n\r\n  // üîπ Use current location\r\n  const handleUseCurrentLocation = () => {\r\n    if (!navigator.geolocation) {\r\n      alert(\"Geolocation is not supported by your browser.\");\r\n      return;\r\n    }\r\n\r\n    navigator.geolocation.getCurrentPosition(\r\n      (pos) => {\r\n        const { latitude, longitude } = pos.coords;\r\n        fetch(\r\n          `https://nominatim.openstreetmap.org/reverse?format=json&lat=${latitude}&lon=${longitude}`\r\n        )\r\n          .then((res) => res.json())\r\n          .then((data) => {\r\n            const address = data.display_name || \"Current Location\";\r\n            setPickup({ lat: latitude, lng: longitude, address });\r\n            setSearchValue(address);\r\n          })\r\n          .catch(() => alert(\"Unable to fetch address details.\"));\r\n      },\r\n      () => alert(\"Failed to get current location. Please enable GPS.\")\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div className=\"pickup-container\">\r\n      <div className=\"form-row pickup-field\">\r\n        <span className=\"location-icon\">üìç</span>\r\n        <input\r\n          type=\"text\"\r\n          id=\"pickup\"\r\n          name=\"pickup\"\r\n          placeholder=\" \"\r\n          value={searchValue}\r\n          onChange={handleSearchChange}\r\n          onFocus={() => setIsFocused(true)}\r\n          onBlur={() => setTimeout(() => setIsFocused(false), 200)}\r\n          className=\"input\"\r\n          required\r\n        />\r\n        <label htmlFor=\"pickup\">Pickup Location</label>\r\n      </div>\r\n\r\n      {/* Dropdown suggestions */}\r\n      {isFocused && (\r\n        <ul className=\"predictions-list\">\r\n          <li\r\n            className=\"use-location-option\"\r\n            onMouseDown={(e) => {\r\n              e.preventDefault();\r\n              handleUseCurrentLocation();\r\n            }}\r\n          >\r\n            üìç Use Current Location\r\n          </li>\r\n\r\n          {predictions.length > 0 ? (\r\n            predictions.map((p) => (\r\n              <li key={p.place_id} onMouseDown={() => handleSelectPrediction(p)}>\r\n                {p.display_name}\r\n              </li>\r\n            ))\r\n          ) : (\r\n            searchValue && <li className=\"no-results\">No matching locations found</li>\r\n          )}\r\n        </ul>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PickupLocation;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}